{"version":3,"file":"js/598.80f36c70.js","mappings":"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","sources":["webpack://web-shop/./src/views/NoficationView.vue","webpack://web-shop/./src/views/NoficationView.vue?5fa2"],"sourcesContent":["<template>\r\n  <div class=\"nofication\">\r\n    <div class=\"grid\">\r\n      <div class=\"user-container\">\r\n        <div\r\n          class=\"list-user\"\r\n          v-for=\"(user, key) in users\"\r\n          :key=\"key\"\r\n          @click=\"receiverId = user.id\"\r\n          :class=\"{ 'receiver-user': receiverId == user.id }\"\r\n        >\r\n          <div>\r\n            <img\r\n              :src=\"this.urlbe + '/file/' + user.avatarUrl\"\r\n              alt=\"\"\r\n              class=\"avt-img\"\r\n              v-if=\"user.avatarUrl != null\"\r\n            />\r\n            <img\r\n              src=\"../assets/images/people/143086968_2856368904622192_1959732218791162458_n.png\"\r\n              alt=\"\"\r\n              class=\"avt-img\"\r\n              v-if=\"user.avatarUrl == null\"\r\n            />\r\n            {{ user.firstName + user.lastName }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"message-container\">\r\n        <div class=\"chatbox\" ref=\"scrollable\">\r\n          <div class=\"item\" v-for=\"(message, key) in messages\" :key=\"key\">\r\n            <h1>{{ message }}</h1>\r\n            \r\n          </div>\r\n        </div>\r\n        <form @submit.prevent=\"sendMessage(inputMessage)\">\r\n          <input type=\"text\" v-model=\"inputMessage\" />\r\n          <button type=\"submit\">Send</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport SockJS from \"sockjs-client\";\r\nimport Stomp from \"webstomp-client\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      messages: [],\r\n      users: [],\r\n      inputMessage: \"\",\r\n      stompClient: null,\r\n      typeSort: \"id\",\r\n      isSort: \"asc\",\r\n      totalItem: 0,\r\n      totalPage: 0,\r\n      pageNumber: 1,\r\n      limit: 12,\r\n      receiverId: 0,\r\n    };\r\n  },\r\n\r\n  props: [\"islogin\", \"isAdmin\", \"user\", \"urlbe\"],\r\n\r\n  created() {\r\n    this.connect();\r\n    this.getListFriend();\r\n    console.log(this.users);\r\n  },\r\n\r\n  methods: {\r\n    sendMessage(msg) {\r\n      var objectMessage = {\r\n        sender: this.user.id,\r\n        content: msg,\r\n        type: \"CHAT\",\r\n        receiver: this.receiverId,\r\n      };\r\n      this.stompClient.send(\r\n        \"/app/chat.sendMessagePrivate\",\r\n        JSON.stringify(objectMessage)\r\n      );\r\n      this.messages.push(msg);\r\n      const scrollableElement = this.$refs.scrollable;\r\n      if (scrollableElement) {\r\n        scrollableElement.scrollTop = scrollableElement.scrollHeight + 1;\r\n      }\r\n    },\r\n\r\n    connect() {\r\n      var socket = new SockJS(\"http://localhost:8085/ws\");\r\n      this.stompClient = Stomp.over(socket);\r\n      this.stompClient.connect({}, () => {\r\n        this.stompClient.subscribe(\"/topic/public\", (tick) => {\r\n          this.messages.push(tick.body);\r\n        });\r\n        this.stompClient.subscribe(\r\n          \"/user/\" + this.user.id + \"/queue/reply\",\r\n          (tick) => {\r\n            this.messages.push(JSON.parse(tick.body).content);\r\n          }\r\n        );\r\n      });\r\n    },\r\n\r\n    async getListFriend() {\r\n      try {\r\n        const response = await axios.get(\r\n          \"http://localhost:8081/userinfo/list?\" +\r\n            \"limit=\" +\r\n            this.limit +\r\n            \"&page=\" +\r\n            this.pageNumber +\r\n            \"&sortby=\" +\r\n            this.typeSort +\r\n            \"&sort=\" +\r\n            this.isSort,\r\n          {\r\n            headers: {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n            },\r\n          }\r\n        );\r\n        this.users = response.data.content;\r\n        this.totalPage = response.data.totalPages;\r\n        this.totalItem = response.data.totalElements;\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-container {\r\n  width: 20%;\r\n  height: 80vh;\r\n  background-color: #fff;\r\n  border: 1px solid #ccc;\r\n  margin-right: 10px;\r\n}\r\n\r\n.list-user {\r\n  width: 100%;\r\n  height: 10%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.list-user:hover {\r\n  border: 3px solid #42b983;\r\n}\r\n\r\n.receiver-user {\r\n  border: 3px solid #42b983;\r\n}\r\n\r\n.avt-img {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n}\r\n\r\n.message-container {\r\n  width: 80%; /* Chiều rộng của phần tử container */\r\n  height: 80vh; /* Chiều cao của phần tử container */\r\n  overflow: auto; /* Thanh cuộn sẽ chỉ xuất hiện khi nội dung vượt quá kích thước hiển thị */\r\n  border: 1px solid #ccc;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.chatbox {\r\n  width: 100%;\r\n  height: 90%;\r\n  border: 1px solid #ccc;\r\n  overflow: auto;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.grid {\r\n  width: 100%;\r\n  max-width: 1440px;\r\n  max-height: 100%;\r\n  margin: 0 auto;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./NoficationView.vue?vue&type=template&id=3c429030&scoped=true\"\nimport script from \"./NoficationView.vue?vue&type=script&lang=js\"\nexport * from \"./NoficationView.vue?vue&type=script&lang=js\"\n\nimport \"./NoficationView.vue?vue&type=style&index=0&id=3c429030&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c429030\"]])\n\nexport default __exports__"],"names":["class","src","_imports_0","alt","ref","_createElementVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","users","user","key","_normalizeClass","receiverId","id","onClick","$event","avatarUrl","urlbe","_hoisted_6","_toDisplayString","firstName","lastName","_hoisted_7","_hoisted_8","messages","message","onSubmit","_cache","_withModifiers","$options","sendMessage","inputMessage","_hoisted_9","data","name","stompClient","typeSort","isSort","totalItem","totalPage","pageNumber","limit","props","created","this","connect","getListFriend","console","log","methods","msg","objectMessage","sender","content","receiver","send","JSON","stringify","push","scrollableElement","$refs","scrollable","scrollTop","scrollHeight","socket","SockJS","Stomp","subscribe","tick","body","parse","response","axios","get","headers","Authorization","localStorage","getItem","totalPages","totalElements","error","computed","__exports__","render"],"sourceRoot":""}