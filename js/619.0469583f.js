"use strict";(self["webpackChunkweb_shop"]=self["webpackChunkweb_shop"]||[]).push([[619],{619:function(s,r,t){t.r(r),t.d(r,{default:function(){return U}});var e=t(6252),i=t(9963),a=t(3577),o=t(1576),n=t(7732),u=t(1337);const d=s=>((0,e.dD)("data-v-f2ba57fa"),s=s(),(0,e.Cn)(),s),c={class:"container"},l=d((()=>(0,e._)("img",{class:"wave",src:o},null,-1))),h={class:"container"},p=d((()=>(0,e._)("div",{class:"img"},[(0,e._)("img",{src:n})],-1))),m={class:"login-content"},w={action:"index.html"},f=d((()=>(0,e._)("img",{src:u},null,-1))),v=d((()=>(0,e._)("h2",{class:"title"},"Đổi mật khẩu",-1))),_={class:"input-div one"},g={class:"i"},b={class:"div"},y={key:0},k={class:"input-div one"},P={class:"i"},A={class:"div"},C={key:0},N=d((()=>(0,e._)("button",{type:"submit",class:"btn"}," Đổi mật khẩu ",-1)));function q(s,r,t,o,n,u){const d=(0,e.up)("font-awesome-icon");return(0,e.wg)(),(0,e.iD)("div",c,[l,(0,e._)("div",h,[p,(0,e._)("div",m,[(0,e._)("div",w,[(0,e._)("form",{onSubmit:r[2]||(r[2]=(0,i.iM)(((...s)=>u.submitForm&&u.submitForm(...s)),["prevent"]))},[f,v,(0,e._)("div",_,[(0,e._)("div",g,[(0,e.Wm)(d,{icon:["fas","user"]})]),(0,e._)("div",b,[(0,e.wy)((0,e._)("input",{type:"password",class:"input",placeholder:"Nhập mật khẩu mới","onUpdate:modelValue":r[0]||(r[0]=s=>n.password=s)},null,512),[[i.nr,n.password]])]),n.errors.password?((0,e.wg)(),(0,e.iD)("span",y,(0,a.zw)(n.errors.password),1)):(0,e.kq)("",!0)]),(0,e._)("div",k,[(0,e._)("div",P,[(0,e.Wm)(d,{icon:["fas","user"]})]),(0,e._)("div",A,[(0,e.wy)((0,e._)("input",{type:"password",class:"input",placeholder:"Nhập lại mật khẩu","onUpdate:modelValue":r[1]||(r[1]=s=>n.confirmPassword=s)},null,512),[[i.nr,n.confirmPassword]])]),n.errors.confirmPassword?((0,e.wg)(),(0,e.iD)("span",C,(0,a.zw)(n.errors.confirmPassword),1)):(0,e.kq)("",!0)]),N],32)])])])])}t(7658);var x=t(6154),z={data(){return{confirmPassword:"",password:"",user:{},errors:{}}},props:["islogin","isAdmin","urlbe"],methods:{validPassword(s){return s.length>=6},async submitForm(){this.errors={},""==this.password?this.errors.password="Password is required.":this.validPassword(this.password)||(this.errors.password="Password must be at least 6 characters."),""==this.confirmPassword?this.errors.confirmPassword="Confirm Password is required.":this.confirmPassword!=this.password&&(this.errors.confirmPassword="Confirm Password is not correct."),0===Object.keys(this.errors).length&&await this.login()},async login(){try{const s=await x.Z.put(this.urlbe+"/user/update/"+this.user.id,{username:this.user.username,email:this.user.email,password:this.password,roles:this.user.roles,firstName:this.user.firstName,lastName:this.user.lastName,phone:this.user.phone,address:this.user.address,avatarUrl:this.user.avatarUrl,userInfoEntity:this.user.userInfoEntity},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+this.$route.params.token}});return alert("Đổi mật khẩu thành công"),this.$router.push("/login"),s}catch(s){console.error(s)}},async current(){try{const s=await x.Z.get(this.urlbe+"/api/current",{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+this.$route.params.token}});return this.user=s.data.userEntity,s.data.userEntity}catch(s){console.error(s)}}},async created(){this.user=await this.current()}},D=t(3744);const E=(0,D.Z)(z,[["render",q],["__scopeId","data-v-f2ba57fa"]]);var U=E},1337:function(s,r,t){s.exports=t.p+"img/avatar.604201df.svg"},7732:function(s,r,t){s.exports=t.p+"img/undraw_window_shopping_re_0kbm.ec3b3bbf.svg"},1576:function(s,r,t){s.exports=t.p+"img/wave.8eed88c3.png"}}]);
//# sourceMappingURL=619.0469583f.js.map